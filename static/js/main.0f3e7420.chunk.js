(this["webpackJsonpepanet-to-gis"]=this["webpackJsonpepanet-to-gis"]||[]).push([[0],{144:function(e,t){},146:function(e,t){},199:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(15),i=n.n(a),c=n(65),s=n.n(c),l=n(104),u=n(13),p=n(30),d=n(105),f=n.n(d),b=n(227),j=n(107),m=n(229),h=n(111),g=n(4),O=Object(b.a)((function(e){return{dropzone:function(e){return{flex:"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",borderWidth:"2px",borderRadius:"2px",borderColor:e.borderColor,borderStyle:"dashed",textAlign:"center",backgroundColor:"#f5f5f5",color:"#5d5d5d",outline:"none",transition:"border .24s ease-in-out",minHeight:e.minHeight,fontSize:"20px",fontFamily:"'Montserrat','Roboto', 'Helvetica', 'Arial', sans-serif",fontWeight:700,lineHeight:1.2,letterSpacing:"-0.24px"}},dropContainer:{}}}));var x=function(e){var t=e.setEpanetInp,n=e.setModelFilename,r=Object(h.a)({maxFiles:1,multiple:!1,onDrop:function(e){var r=new FileReader;r.onabort=function(){return console.log("file reading was aborted")},r.onerror=function(){return console.log("file reading has failed")},r.onload=function(){var e=r.result;t(e)},r.readAsText(e[0]),n(e[0].name.replace(/\.[^/.]+$/,""))}}),o=r.isDragAccept,a=r.isDragActive,i=r.getRootProps,c=r.getInputProps,s=Object(j.a)(),l=Object(m.a)(s.breakpoints.up("md")),u=O({borderColor:a?o?"#2196f3":"#ff1744":"#eeeeee",minHeight:l?"450px":"200px"});return Object(g.jsx)("section",{className:u.dropContainer,children:Object(g.jsxs)("div",Object(p.a)(Object(p.a)({className:u.dropzone},i()),{},{children:[Object(g.jsx)("input",Object(p.a)({},c())),Object(g.jsx)("p",{children:"Drop an EPANET model here, or click to select file"})]}))})},v=n(231),y=n(235),w=n(234),N=n(233),k=n(238),I=n(237),E=n(232),C=n(66),S=n.n(C),T=n(112),P=n(24),A=n.n(P),L=n(108),F=n.n(L),z=n(49);function D(e,t){return function(n,r){t.file(e+".shp",r.shp.buffer,{binary:!0}),t.file(e+".shx",r.shx.buffer,{binary:!0}),t.file(e+".dbf",r.dbf.buffer,{binary:!0})}}var H=n(110);function B(){return new Worker(n.p+"static/js/runToGeoJson.worker.7487bee2.worker.js")}var J=Object(b.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},modelName:{textAlign:"center"},loadingDataLabel:{paddingTop:"10px"},button:{margin:e.spacing(1)}}}));function G(e){return Object(g.jsx)(I.a,Object(p.a)({elevation:6,variant:"filled"},e))}var M=function(){var e=Object(r.useState)(void 0),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(void 0),c=Object(u.a)(i,2),p=c[0],d=c[1],b=Object(r.useState)(""),j=Object(u.a)(b,2),m=j[0],h=j[1],O=Object(r.useState)(!1),I=Object(u.a)(O,2),C=I[0],P=I[1],L=o.a.useState(!1),M=Object(u.a)(L,2),R=M[0],W=M[1],Y=function(e,t){"clickaway"!==t&&W(!1)},V=J();Object(r.useEffect)((function(){(function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=15;break}return P(!0),t=new B,r=H.a(t),e.prev=4,e.next=7,r(n);case 7:o=e.sent,d(o),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),W(!0);case 14:P(!1);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}})()()}),[n]);var _=Object(r.useMemo)((function(){if(p){var e=Object(T.a)(p),t=Object(u.a)(e,4),n=t[0],r=t[1],o=t[2],a=t[3];return f()({viewportSize:{width:800,height:800},attributes:{style:"stroke:#000000; stroke-width:1px;","vector-effect":"non-scaling-stroke"},explode:!1,mapExtent:{left:n,right:o,bottom:r,top:a}}).convert(p)}}),[p]);return Object(g.jsxs)(v.a,{maxWidth:"md",children:[Object(g.jsx)(k.a,{open:R,autoHideDuration:6e3,onClose:Y,children:Object(g.jsx)(G,{onClose:Y,severity:"error",children:"There was an error loading the INP file"})}),Object(g.jsxs)(E.a,{spacing:3,container:!0,children:[Object(g.jsxs)(E.a,{item:!0,xs:12,children:[Object(g.jsx)(N.a,{variant:"h3",component:"h1",gutterBottom:!0,children:"EPANET to GIS"}),Object(g.jsx)(N.a,{variant:"body1",gutterBottom:!0,children:"Create Shapefiles or GeoJSON files of an EPANET hydraulic model. Either drag an INP into the drop zone below or click the area to open a prompt to select the file. All geoprocessing is done locally and no data is sent to the server."}),Object(g.jsx)(N.a,{variant:"body1",gutterBottom:!0,children:"This app is open-source and you can find the source code on GitHub, if submit any problems as issues on GitHub. The app uses epanet-js, a javascript conversion of the owa-epanet library, links to both projects are below."}),Object(g.jsx)(w.a,{variant:"contained",color:"default",size:"small",className:V.button,startIcon:Object(g.jsx)(S.a,{}),href:"https://github.com/modelcreate/epanet-to-gis",children:"epanet-to-gis"}),Object(g.jsx)(w.a,{variant:"contained",color:"default",size:"small",className:V.button,startIcon:Object(g.jsx)(S.a,{}),href:"https://github.com/modelcreate/epanet-js",children:"epanet-js"})]}),Object(g.jsx)(E.a,{item:!0,xs:12,md:6,children:Object(g.jsx)(x,{setEpanetInp:a,setModelFilename:h})}),Object(g.jsxs)(E.a,{container:!0,xs:12,md:6,justifyContent:"center",alignItems:"center",children:[C&&Object(g.jsxs)(E.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:[Object(g.jsx)(y.a,{}),Object(g.jsx)(N.a,{variant:"caption",display:"block",className:V.loadingDataLabel,children:"Loading data..."})]}),p&&_&&!1===C&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(N.a,{className:V.modelName,variant:"h5",component:"h2",gutterBottom:!0,children:m}),Object(g.jsxs)(E.a,{container:!0,justifyContent:"center",className:V.root,children:[Object(g.jsx)(w.a,{variant:"contained",size:"small",color:"primary",onClick:function(){!function(e,t){var n=new F.a,r=e.features.filter((function(e){return"Pipe"===e.properties.category})),o=r.map((function(e){return[e.geometry.coordinates]})),a=r.map((function(e){return e.properties}));A.a.write(a,"POLYLINE",o,D("pipes",n));var i=e.features.filter((function(e){return"Valve"===e.properties.category})),c=i.map((function(e){return[e.geometry.coordinates]})),s=i.map((function(e){return e.properties}));A.a.write(s,"POLYLINE",c,D("valves",n));var l=e.features.filter((function(e){return"Valve"===e.properties.category})),u=l.map((function(e){return[e.geometry.coordinates]})),p=l.map((function(e){return e.properties}));A.a.write(p,"POLYLINE",u,D("valves",n));var d=e.features.filter((function(e){return"Junction"===e.properties.category})),f=d.map((function(e){return e.geometry.coordinates})),b=d.map((function(e){return e.properties}));A.a.write(b,"POINT",f,D("junctions",n));var j=e.features.filter((function(e){return"Tank"===e.properties.category})),m=j.map((function(e){return e.geometry.coordinates})),h=j.map((function(e){return e.properties}));A.a.write(h,"POINT",m,D("tanks",n));var g=e.features.filter((function(e){return"Reservior"===e.properties.category})),O=g.map((function(e){return e.geometry.coordinates})),x=g.map((function(e){return e.properties}));A.a.write(x,"POINT",O,D("reserviors",n)),n.generateAsync({type:"blob",compression:"DEFLATE"}).then((function(e){console.log(e),Object(z.saveAs)(e,"".concat(t,".zip"))}))}(p,m)},children:"Export as Shapefiles"}),Object(g.jsx)(w.a,{variant:"contained",size:"small",color:"primary",onClick:function(){!function(e,t){var n=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(z.saveAs)(n,"".concat(t,".json"))}(p,m)},children:"Export as GeoJSON"})]}),Object(g.jsx)("div",{id:"mapArea",children:Object(g.jsx)("div",{dangerouslySetInnerHTML:{__html:'<svg id="map" xmlns="http://www.w3.org/2000/svg" width="100%" height="350" viewBox="0 0 800 800">'.concat(_,"</svg>")}})})]})]})]})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,239)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),a(e),i(e)}))},W=n(236);i.a.render(Object(g.jsxs)(o.a.StrictMode,{children:[Object(g.jsx)(W.a,{}),Object(g.jsx)(M,{})]}),document.getElementById("root")),R()}},[[199,1,2]]]);
//# sourceMappingURL=main.0f3e7420.chunk.js.map