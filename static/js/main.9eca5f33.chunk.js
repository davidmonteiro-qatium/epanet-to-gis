(this["webpackJsonpepanet-to-gis"]=this["webpackJsonpepanet-to-gis"]||[]).push([[0],{145:function(e,t){},147:function(e,t){},200:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),i=n.n(o),c=n(65),s=n.n(c),l=n(104),u=n(13),p=n(31),d=n(105),f=n.n(d),b=n(229),j=n(107),h=n(231),m=n(111),g=n(4),O=Object(b.a)((function(e){return{dropzone:function(e){return{flex:"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",borderWidth:"2px",borderRadius:"2px",borderColor:e.borderColor,borderStyle:"dashed",textAlign:"center",backgroundColor:"#f5f5f5",color:"#5d5d5d",outline:"none",transition:"border .24s ease-in-out",minHeight:e.minHeight,fontSize:"20px",fontFamily:"'Montserrat','Roboto', 'Helvetica', 'Arial', sans-serif",fontWeight:700,lineHeight:1.2,letterSpacing:"-0.24px"}},dropContainer:{}}}));var x=function(e){var t=e.setEpanetInp,n=e.setModelFilename,r=Object(m.a)({maxFiles:1,multiple:!1,onDrop:function(e){var r=new FileReader;r.onabort=function(){return console.log("file reading was aborted")},r.onerror=function(){return console.log("file reading has failed")},r.onload=function(){var e=r.result;t(e)},r.readAsText(e[0]),n(e[0].name.replace(/\.[^/.]+$/,""))}}),a=r.isDragAccept,o=r.isDragActive,i=r.getRootProps,c=r.getInputProps,s=Object(j.a)(),l=Object(h.a)(s.breakpoints.up("md")),u=O({borderColor:o?a?"#2196f3":"#ff1744":"#eeeeee",minHeight:l?"450px":"200px"});return Object(g.jsx)("section",{className:u.dropContainer,children:Object(g.jsxs)("div",Object(p.a)(Object(p.a)({className:u.dropzone},i()),{},{children:[Object(g.jsx)("input",Object(p.a)({},c())),Object(g.jsx)("p",{children:"Drop an EPANET model here, or click to select a file"})]}))})},v=n(233),y=n(237),w=n(236),k=n(202),N=n(240),I=n(239),E=n(234),C=n(66),S=n.n(C),T=n(235),P=n(112),A=n(24),L=n.n(A),F=n(108),z=n.n(F),D=n(49);function B(e,t){return function(n,r){t.file(e+".shp",r.shp.buffer,{binary:!0}),t.file(e+".shx",r.shx.buffer,{binary:!0}),t.file(e+".dbf",r.dbf.buffer,{binary:!0})}}var H=n(110);function J(){return new Worker(n.p+"static/js/runToGeoJson.worker.7487bee2.worker.js")}var G=Object(b.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},modelName:{textAlign:"center"},loadingDataLabel:{paddingTop:"10px"},button:{margin:e.spacing(1)}}}));function M(e){return Object(g.jsx)(I.a,Object(p.a)({elevation:6,variant:"filled"},e))}var R=function(){var e=Object(r.useState)(void 0),t=Object(u.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(void 0),c=Object(u.a)(i,2),p=c[0],d=c[1],b=Object(r.useState)(""),j=Object(u.a)(b,2),h=j[0],m=j[1],O=Object(r.useState)(!1),I=Object(u.a)(O,2),C=I[0],A=I[1],F=a.a.useState(!1),R=Object(u.a)(F,2),W=R[0],Y=R[1],V=function(e,t){"clickaway"!==t&&Y(!1)},_=G();Object(r.useEffect)((function(){(function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=15;break}return A(!0),t=new J,r=H.a(t),e.prev=4,e.next=7,r(n);case 7:a=e.sent,d(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),Y(!0);case 14:A(!1);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}})()()}),[n]);var $=Object(r.useMemo)((function(){if(p){var e=Object(P.a)(p),t=Object(u.a)(e,4),n=t[0],r=t[1],a=t[2],o=t[3];return f()({viewportSize:{width:800,height:800},attributes:{style:"stroke:#000000; stroke-width:1px;","vector-effect":"non-scaling-stroke"},explode:!1,mapExtent:{left:n,right:a,bottom:r,top:o}}).convert(p)}}),[p]);return Object(g.jsxs)(v.a,{maxWidth:"md",children:[Object(g.jsx)(N.a,{open:W,autoHideDuration:6e3,onClose:V,children:Object(g.jsx)(M,{onClose:V,severity:"error",children:"There was an error loading the INP file"})}),Object(g.jsxs)(E.a,{spacing:3,container:!0,children:[Object(g.jsxs)(E.a,{item:!0,xs:12,children:[Object(g.jsx)(k.a,{variant:"h3",component:"h1",gutterBottom:!0,children:"EPANET to GIS"}),Object(g.jsx)(k.a,{variant:"body1",gutterBottom:!0,children:"Convert an EPANET hydraulic model to shapefiles or a GeoJSON file. Either drag an INP into the drop zone below or click the area to open a prompt to select the file. All geoprocessing is done locally and no data is sent to the server."}),Object(g.jsxs)(k.a,{variant:"body1",gutterBottom:!0,children:["This app is open-source and you can find the source code on GitHub, if you have any problems, please submit as an ",Object(g.jsx)(T.a,{href:"https://github.com/modelcreate/epanet-to-gis/issues",children:"issue on GitHub"}),". The app was created by ",Object(g.jsx)(T.a,{href:"https://www.linkedin.com/in/lukepbutler/",children:"Luke Butler"})," and uses epanet-js, a javascript conversion of the owa-epanet library, links to both projects are below."]}),Object(g.jsx)(w.a,{variant:"contained",color:"default",size:"small",className:_.button,startIcon:Object(g.jsx)(S.a,{}),href:"https://github.com/modelcreate/epanet-to-gis",children:"epanet-to-gis"}),Object(g.jsx)(w.a,{variant:"contained",color:"default",size:"small",className:_.button,startIcon:Object(g.jsx)(S.a,{}),href:"https://github.com/modelcreate/epanet-js",children:"epanet-js"})]}),Object(g.jsx)(E.a,{item:!0,xs:12,md:6,children:Object(g.jsx)(x,{setEpanetInp:o,setModelFilename:m})}),Object(g.jsxs)(E.a,{container:!0,xs:12,md:6,justifyContent:"center",alignItems:"center",children:[C&&Object(g.jsxs)(E.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:[Object(g.jsx)(y.a,{}),Object(g.jsx)(k.a,{variant:"caption",display:"block",className:_.loadingDataLabel,children:"Loading data..."})]}),p&&$&&!1===C&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(k.a,{className:_.modelName,variant:"h5",component:"h2",gutterBottom:!0,children:h}),Object(g.jsxs)(E.a,{container:!0,justifyContent:"center",className:_.root,children:[Object(g.jsx)(w.a,{variant:"contained",size:"small",color:"primary",onClick:function(){!function(e,t){var n=new z.a,r=e.features.filter((function(e){return"Pipe"===e.properties.category})),a=r.map((function(e){return[e.geometry.coordinates]})),o=r.map((function(e){return e.properties}));L.a.write(o,"POLYLINE",a,B("pipes",n));var i=e.features.filter((function(e){return"Valve"===e.properties.category})),c=i.map((function(e){return[e.geometry.coordinates]})),s=i.map((function(e){return e.properties}));L.a.write(s,"POLYLINE",c,B("valves",n));var l=e.features.filter((function(e){return"Valve"===e.properties.category})),u=l.map((function(e){return[e.geometry.coordinates]})),p=l.map((function(e){return e.properties}));L.a.write(p,"POLYLINE",u,B("valves",n));var d=e.features.filter((function(e){return"Junction"===e.properties.category})),f=d.map((function(e){return e.geometry.coordinates})),b=d.map((function(e){return e.properties}));L.a.write(b,"POINT",f,B("junctions",n));var j=e.features.filter((function(e){return"Tank"===e.properties.category})),h=j.map((function(e){return e.geometry.coordinates})),m=j.map((function(e){return e.properties}));L.a.write(m,"POINT",h,B("tanks",n));var g=e.features.filter((function(e){return"Reservior"===e.properties.category})),O=g.map((function(e){return e.geometry.coordinates})),x=g.map((function(e){return e.properties}));L.a.write(x,"POINT",O,B("reserviors",n)),n.generateAsync({type:"blob",compression:"DEFLATE"}).then((function(e){console.log(e),Object(D.saveAs)(e,"".concat(t,".zip"))}))}(p,h)},children:"Export as Shapefiles"}),Object(g.jsx)(w.a,{variant:"contained",size:"small",color:"primary",onClick:function(){!function(e,t){var n=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(D.saveAs)(n,"".concat(t,".json"))}(p,h)},children:"Export as GeoJSON"})]}),Object(g.jsx)("div",{id:"mapArea",children:Object(g.jsx)("div",{dangerouslySetInnerHTML:{__html:'<svg id="map" xmlns="http://www.w3.org/2000/svg" width="100%" height="350" viewBox="0 0 800 800">'.concat($,"</svg>")}})})]})]})]})]})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,241)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))},Y=n(238);i.a.render(Object(g.jsxs)(a.a.StrictMode,{children:[Object(g.jsx)(Y.a,{}),Object(g.jsx)(R,{})]}),document.getElementById("root")),W()}},[[200,1,2]]]);
//# sourceMappingURL=main.9eca5f33.chunk.js.map